# Prompt Writing Best Practices

This document provides comprehensive guidelines for creating high-quality YAML prompts.

## 1. YAML Syntax Fundamentals

### Multi-line String Handling

| Syntax | Use Case | Example |
|--------|----------|---------|
| `\|-` | System prompts (strips trailing newline) | `system_prompt: \|-` |
| `|` | User prompts (preserves newlines) | `user_prompt: \|` |
| `>` | Long single lines (rarely used) | `description: >` |

### Indentation Rules

- Use 2 spaces for indentation (no tabs)
- Nested structures under each field
- List items align at parent level

```yaml
system_prompt: |-
  ### Section Title
  Content here.
  
  - List item 1
    Nested item (2 spaces)
  - List item 2
```

## 2. Structure Guidelines

### Heading Hierarchy

Use headings to create logical sections:

```yaml
system_prompt: |-
  ### Primary Section (most important)
  Core role and primary responsibilities.
  
  ### Secondary Section
  Additional requirements.
  
  ## Less Important Section
  Background context.
  
  ### Specific Guidelines
  - Concrete rules
```

**Rules:**
- Never skip heading levels (e.g., `###` to `#####`)
- Maximum heading depth: `####` for most prompts
- Use `###` for major sections, `####` for subsections

### Separator Usage

Separators (`---`, `***`) create visual clutter and should be avoided:

**DO:**
```yaml
system_prompt: |-
  ### Requirements
  1. Be concise
  2. Be clear
  
  ### Output Format
  Plain text response.
```

**DON'T:**
```yaml
system_prompt: |-
  ### Requirements
  1. Be concise
  2. Be clear
  
  ---
  
  ### Output Format
  Plain text response.
  
  ***
  
  Additional notes.
```

**Exception:** Use `---` only when truly separating distinct document types or sections in complex templates.

## 3. Writing Style

### Sentence Structure

**DO:**
- Use active voice: "You are a helpful assistant."
- Be direct: "Generate a summary."
- Keep sentences under 25 words.

**DON'T:**
- Passive voice: "A summary should be generated by you."
- Vague instructions: "Maybe you could try to..."
- Run-on sentences.

### Conciseness Principles

**Before (verbose):**
```
You are a document summarization assistant and your main job and responsibility is to read through the document that is provided to you and create a summary of it. You should make sure to...
```

**After (concise):**
```
You are a professional document summarization assistant. Generate a concise summary based on the provided content.
```

### List Consistency

**DO (all items parallel):**
```yaml
- Be accurate
- Be concise
- Be helpful
```

**DON'T (mixed structures):**
```yaml
- Be accurate
- Creating summaries
- You should be helpful
```

### Punctuation Rules

| Element | Rule | Example |
|---------|------|---------|
| Lists | Period only if complex sentences | `- Item one` or `- First item. Second sentence.` |
| Headings | No period at end | `### Requirements` |
| Variables | Spaces around braces | `{{ filename }}` not `{{filename}}` |
| Code blocks | Language tag required | ```python |

## 4. Variable Placeholder Standards

### Naming Conventions

Use descriptive, lowercase names with underscores:

| Good | Bad |
|------|-----|
| `{{ document_title }}` | `{{ title }}` |
| `{{ max_word_count }}` | `{{ max }}` |
| `{{ user_query }}` | `{{ q }}` |

### Variable Types

```yaml
# String variables
user_prompt: |
  Analyze: {{ document_content }}

# Numeric variables with constraints
user_prompt: |
  Summary ({{ max_words }} words maximum):

# Optional variables (with Jinja2 default)
{{ time|default('current time') }}

# Conditional variables
{%- if memory_list and memory_list|length > 0 %}
  ### Contextual Memory
  ...
{%- endif %}
```

## 5. Common Sections

### Role Definition

```yaml
system_prompt: |-
  ### Role
  You are a professional [domain] assistant specialized in [specific task].
```

### Requirements

```yaml
  ### Requirements
  1. First requirement (most important)
  2. Second requirement
  3. Third requirement
```

### Guidelines

```yaml
  ### Guidelines
  - Do this (positive instruction)
  - Don't do that (negative instruction)
  - Always do this (mandatory)
```

### Output Format

```yaml
  ### Output Format
  Respond in plain text without:
  - Separators (---, ***)
  - HTML tags
  - Special formatting
```

## 6. Anti-Patterns to Avoid

### Anti-Pattern 1: Excessive Instructions

```yaml
# BAD - Too many nested rules
system_prompt: |-
  You are an assistant. Your name is X. You were created by Y.
  You should always be helpful. Being helpful means you should:
  1. Greet the user
  2. Listen carefully
  3. Respond appropriately
  ...
```

**Better:**
```yaml
system_prompt: |-
  You are a helpful assistant specialized in {{ task_type }}.
```

### Anti-Pattern 2: Vague Instructions

```yaml
# BAD - Not actionable
system_prompt: |-
  You should do a good job at summarizing. Make sure it's good.
```

**Better:**
```yaml
system_prompt: |-
  ### Task
  Generate a {{ word_count }}-word summary that captures:
  - Main topic
  - Key arguments
  - Supporting evidence
```

### Anti-Pattern 3: Mixed Languages

```yaml
# BAD - Inconsistent language
system_prompt: |-
  ### Role
  You are a professional assistant.
  ### 要求
  保持简洁。
```

**Better (choose one language):**
```yaml
system_prompt: |-
  ### Role
  You are a professional assistant.
  ### Requirements
  Keep responses concise.
```

### Anti-Pattern 4: Unbalanced Lists

```yaml
# BAD - Missing items
  - Do A
  - Do B
  
# Better - Complete list
  - Do A
  - Do B
  - Do C
```

## 7. Language Guidelines

### English Prompts

- Use American or British English consistently
- Prefer simple vocabulary over complex terms
- Use "you" for direct addressing

### Chinese Prompts

- Use Simplified Chinese (简体中文)
- Follow Chinese punctuation standards
- Keep technical terms in English when appropriate

### Mixed-Language Projects

When maintaining both EN and ZH versions:

```yaml
# Filename pattern: prompt_name_en.yaml
# Corresponding file: prompt_name_zh.yaml

# Key terms translation:
# - "Requirements" → "要求"
# - "Guidelines" → "指南"
# - "Output Format" → "输出格式"
```

## 8. Quality Validation Checklist

### Before Finalizing

```markdown
□ All braces are balanced ({{ }})
□ No trailing spaces at line ends
□ Consistent heading hierarchy
□ Parallel list structure
□ Proper YAML indentation (2 spaces)
□ No HTML tags in Markdown
□ Variables have descriptive names
□ Language is consistent throughout
□ No excessive separators
□ Sentence case for list items
```

### Automated Checks

Consider using:
1. YAML linter (yamllint)
2. Jinja2 syntax validator
3. Markdown formatter

## 9. Performance Considerations

### Prompt Length

- System prompts: 500-2000 tokens typical
- User prompts: 100-500 tokens typical
- Longer isn't always better—be concise

### Token Efficiency

- Avoid repetitive phrasing
- Use variables for repeated content
- Trim unnecessary sections

## 10. Version Control

### File Naming

```yaml
# Format: {purpose}_{lang}.yaml
manager_system_prompt_template_en.yaml
manager_system_prompt_template_zh.yaml
document_summary_agent_en.yaml
```

### Changelog Practices

When modifying prompts:
1. Update file in place
2. Document significant changes
3. Consider version history for major revisions
